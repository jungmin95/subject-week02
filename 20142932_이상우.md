
# JAVA SerVlet 구현 원리


### 버전에 따른 Servlet 작성 방법

1. Servlet 3.0 이상에서의 사용 방법
 * web.xml을 사용하지 않습니다.
 * 자바 어노테이션(annotation) 을 사용합니다. 
 - @와 같이 특별한 의미를 지닌 주석을 이용하는 것을 의미합니다.  
 - annotation은 종류가 굉장히 다양하며 CheatSheat를 통해 확인할 수 있습니다.


2. Servlet 3.0 미만에서의 사용 방법
 * Servlet을 등록할 때 web.xml 파일에 등록해야 합니다.



먼저, Servlet 3.0 이상의 경우, 실행하고자 하는 java 파일 Class 윗 부분에 @WebServlet("/domain_name") 을 입력합니다. 
Class 아래 부분은 구현하고자 하는 코드를 입력하면 됩니다.   

ex) ```java
//@WebServlet("/HelloServlet")
public class ... ```

해당 문구에서 @WebServlet은 해당 java 파일을 서블릿과 매핑하겠다는 것을 의미하며, 
" " 문구 안에 해당하는 /domain_name(임의의 이름)은 기존 할당된 주소에 해당 도메인의 이름을 덧붙이면 해당 java 파일이 연결된 새로운 페이지를 보여줌을 의미합니다. 
    

반면 3.0 미만의 버전에서는 annotation 기능이 존재하지 않기 때문에 조금 번거로운 절차가 요구 됩니다. 

먼저, JAVA EE 에서 Dynamic Web project를 만들 때 서블릿을 매핑 할 수 있도록 도와주는 연결 매개체인 web.xml이라는 파일을 생성하도록 마지막 절차에서 체크박스를 선택해주어야 합니다.

![name](.img/a.png)

생성된 web.xml 파일을 클릭하면 Design이 나오게 되는데, 오른쪽 메뉴인 Source로 이동해 코드를 확인합니다. 

```java
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://xmlns.jcp.org/xml/ns/javaee" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd" id="WebApp_ID" version="4.0">
  <display-name>kr.bu.ac.hello</display-name>
    
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
 </web-app>
```
> 기존에 존재하는 코드의 형태 입니다.

``` java
<servlet>
    <servlet-name>hello</servlet-name>
    <servlet-class>kr.bu.ac.hello.HelloServlet</servlet-class>
  </servlet>
  
  <servlet-mapping>
    <servlet-name>hello</servlet-name>
    <url-pattern>/hello</url-pattern>
  </servlet-mapping>
```
> 서블릿을 이용하기 위해,<display-name>아래 부분에 해당 코드를 추가적으로 작성하도록  합니다.

먼저, 큰 틀에서 보면 Servlet 과 Servlet-mapping 이라는 구문이 존재합니다.  
*Survlet*은 해당 페이지를 만들 때 참조하는 클래스를 어디서 가져올 것이며, 가져온 서블릿 클래스의 이름을 쉽게 구분하기 위해 어떤 이름으로 정의할 지에 대한 내용을 지닙니다.

*Survlet-mapping*은 Survlet에서 이름을 부여 받은 클래스가 URL 주소 입력시에 어떤 도메인으로 할당되는지에 관한 설명이 나와있습니다. 매핑이라는 이름답게 , 새로운 페이지와 서블릿을 연결해주는 역할을 가집니다.

* Servelt 의 구성 요소  
    **1.Servlet-class**  
    프로젝트에서 해당 패키지 안에 존재하는 Class 파일의 경로를 적어줍니다.
    
    ex ) kr.bu.ac.hello.HelloServlet  
     **패키지명 . 파일이름**
             
    경로를 입력할 때 주의해야 할 사항은, 패키지 . 파일 순서로 경로가 입력되어야 한다는 것입니다. **프로젝트 이름은 경로 입력 대상에 포함되지 않습니다.**  
    
    **2.Servlet-name**  
    Servelt-class 로 불러온 파일의 이름을 정의해 줍니다 . 
    해당 코드에서는 HelloServlet 파일의 이름을 hello 라고 정의해 주었습니다.
    
    
    
    

* Servlet-mapping 의 구성 요소  
    **1. Servlet-name**  
    Servlet-name에 해당하는 이름을 호출하기 위해 사용됩니다, 
    해당 구문에서는 hello라는 이름을 호출하도록 합니다. (단, url-pattern의 조건을 만족해야 합니다)  
    **2. url-pattern**  
    원래 페이지에서 url-pattern 에 해당하는 주소를 가지면 Survlet-name에 해당하는 파일을 호출하도록 합니다.  
    
    해당 예시를 통해 설명하자면, url-pattern에 해당하는 /hello라는 주소가 입력되면 Servlet-name에 해당하는 hello라는 이름의 서블릿을 호출하도록하는 명령어 이며, Servlet에서 등록했던 Servlet-name 과 일치하면 해당 경로의 파일을 불러오도록 하는 것 입니다.

따라서, Servlet 과 Servlet-mapping 안에 존재하는 Servlet-name은 동일한 이름이어야 합니다. 

참조 [edwith- boostcourse] 웹 프로그래밍 기초  
https://www.edwith.org/boostcourse-web/lecture/16687


```python

```
